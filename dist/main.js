(()=>{"use strict";function e(e,t,n,l){const d=document.createElement(e);return t&&(d.id=t),n&&n.forEach((e=>d.classList.add(e))),l&&(d.innerText=l),d}function t(){return Math.random().toString().split(".").join("")}const n=document.querySelector("#folders .card");class l{constructor(e){this.title=e,this.id=t(),this.tasks=[]}render(){const t=e("div",this.id,["folder"],null),l=e("dp",null,null,this.title),d=e("img",null,["delete"],null);d.src="./img/stock.jpg",d.addEventListener("click",(()=>{this.delete()})),t.appendChild(l),t.appendChild(d),n.appendChild(t),t.addEventListener("click",(()=>{s=this,s.active=falsethis.renderTasks(),document.querySelectorAll(".folder").forEach((e=>e.classList.value="folder")),document.querySelectorAll(".delete"),deleteBtns.forEach((e=>e.src="./img/stock.jpg")),t.classList.value.includes("active")||(t.classList.add("active"),d.src="./img/stock.jpg")}))}delete(){d=d.filter((e=>e.id!==this.id)),folder.renderFolders()}renderTasks(){document.querySelector("#task-container").innerHTML="",this.tasks.forEach((e=>e.render()))}static renderFolders(){n.innerHTML="",d.forEach((e=>e.render()))}static setCurrentFolder(e){s=e}}let d=[new l("Test Folder")],s=d[0];const i=document.querySelector("#task-container");class r{constructor(e,n,l){this.name=e,this.date=n,this.priority=l,this.id=t()}render(){const t=e("div",this.id,["task"],null),n=e("div",null,["task-name"],null),l=e("input",null,["checkbox"],null);l.type="checkbox";const d=e("p",null,null,this.name),s=e("div",null,["task-info"],null),r=e("p",null,null,this.date),a=e("div",null,["badge"],this.priority),o=e("img",null,["edit"],null);o.src="./img/stock.jpg";const c=e("img",null,["edit"],null);c.src="./img/stock.jpg",c.addEventListener("click",(()=>{this.edit()})),n.appendChild(l),n.appendChild(d),s.appendChild(r),s.appendChild(a),s.appendChild(o),s.appendChild(c),t.appendChild(n),t.appendChild(s),i.appendChild(t),l.addEventListener("change",(()=>{d.classList.toggle("done")})),"important"===this.priority&&a.classList.add("important"),o.addEventListener("click",(()=>{this.delete()}))}delete(){s.tasks=s.tasks.filter((e=>e.id!==this.id)),s.renderTasks()}edit(){const e=document.getElementById("myModal");e.style.display="flex",document.getElementById("form-task-edit").addEventListener("submit",(t=>{if(t.preventDefault(),document.getElementById("task-name-edit"),""===$title.value)return void alert("Task must have a name.");const n=document.getElementById("task-date-edit");if(""===n.value)return void alert("Please choose a deadline.");const l=document.getElementById("task-priority-edit");this.name=$title.value,this.date=n.value,this.priority=l.value,e.style.display="none",s.renderTasks()}))}}document.getElementById("form-folder").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("folder-name");if(""===t.value)return void alert("Project folder must have a name");const n=new l(t.value);d.push(n),t.value="",l.renderFolders(),l.setCurrentFolder(n);let s=document.querySelectorAll(".folder");s[s.length-1].classList.add("active"),s[s.length-1].lastChild.src="./img/stock.jpg"})),document.getElementById("form-task").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("task-name");if(""===t.value)return void alert("Task must have a name");const n=document.getElementById("task-date");if(""===n.value)return void alert("Please choose a deadline.");const l=document.getElementById("task-priority"),d=new r(t.value,n.value,l.value);s.tasks.push(d),d.render()})),l.renderFolders();const a=prompt("What's your first name?");document.querySelector(".user-name").innerText=a||"User"})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxpQkFBaUIsVUFBV3FDLElBQ3RDQSxFQUFFQyxpQkFDRixNQUFNekMsRUFBU3JCLFNBQVMwRCxlQUFlLGVBQ3ZDLEdBQXFCLEtBQWpCckMsRUFBT1ksTUFHVCxZQUZBOEIsTUFBTSxtQ0FJUixNQUFNeEIsRUFBUyxJQUFJekIsRUFBT08sRUFBT1ksT0FDakNJLEVBQWE0QixLQUFLMUIsR0FDbEJsQixFQUFPWSxNQUFRLEdBQ2ZuQixFQUFPMEIsZ0JBQ1AxQixFQUFPb0QsaUJBQWlCM0IsR0FDeEIsSUFBSTRCLEVBQVVuRSxTQUFTK0IsaUJBQWlCLFdBQ3hDb0MsRUFBUUEsRUFBUUMsT0FBUyxHQUFHakUsVUFBVUMsSUFBSSxVQUMxQytELEVBQVFBLEVBQVFDLE9BQVMsR0FBR0MsVUFBVTlDLElBQU0scUJBRzVCdkIsU0FBUzBELGVBQWUsYUFFaENsQyxpQkFBaUIsVUFBV3FDLElBQ3BDQSxFQUFFQyxpQkFDRixNQUFNekMsRUFBU3JCLFNBQVMwRCxlQUFlLGFBQ3ZDLEdBQXFCLEtBQWpCckMsRUFBT1ksTUFFVCxZQURBOEIsTUFBTSx5QkFHUixNQUFNWCxFQUFRcEQsU0FBUzBELGVBQWUsYUFDdEMsR0FBb0IsS0FBaEJOLEVBQU1uQixNQUVSLFlBREE4QixNQUFNLDZCQUdSLE1BQU1DLEVBQVloRSxTQUFTMEQsZUFBZSxpQkFFcENoQixFQUFPLElBQUlFLEVBQUt2QixFQUFPWSxNQUFPbUIsRUFBTW5CLE1BQU8rQixFQUFVL0IsT0FDM0ROLEVBQWNULE1BQU0rQyxLQUFLdkIsR0FDekJBLEVBQUt2QixZQUdQTCxFQUFPMEIsZ0JBQ1AsTUFBTThCLEVBQU9DLE9BQU8sMkJBQ3BCdkUsU0FBU2EsY0FBYyxjQUFjUixVQUFZaUUsR0FBUSxRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tb2R1bGVzL2RvbS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21vZHVsZXMvZm9sZGVyLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0eXBlLCBpZCwgY2xhc3NlcywgY29udGVudCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgaWYgKGlkKSBlbGVtZW50LmlkID0gaWQ7XG4gIGlmIChjbGFzc2VzKSBjbGFzc2VzLmZvckVhY2goKG15Q2xhc3MpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChteUNsYXNzKSk7XG5cbiAgaWYgKGNvbnRlbnQpIGVsZW1lbnQuaW5uZXJUZXh0ID0gY29udGVudDtcblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gc2V0SWQoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3BsaXQoJy4nKS5qb2luKCcnKTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRWxlbWVudCwgc2V0SWQgfTtcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIHNldElkIH0gZnJvbSAnLi9kb20nO1xuXG5jb25zdCAkZm9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZvbGRlcnMgLmNhcmQnKTtcblxuY2xhc3MgRm9sZGVyIHtcbiAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5pZCA9IHNldElkKCk7XG4gICAgdGhpcy50YXNrcyA9IFtdO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0ICRkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB0aGlzLmlkLCBbJ2ZvbGRlciddLCBudWxsKTtcbiAgICBjb25zdCAkdGl0bGUgPSBjcmVhdGVFbGVtZW50KCdkcCcsIG51bGwsIG51bGwsIHRoaXMudGl0bGUpO1xuICAgIGNvbnN0ICRkZWxldGUgPSBjcmVhdGVFbGVtZW50KCdpbWcnLCBudWxsLCBbJ2RlbGV0ZSddLCBudWxsKTtcbiAgICAkZGVsZXRlLnNyYyA9ICcuL2ltZy9zdG9jay5qcGcnOyAvL1RPRE86IGFkZCBpbWcgc3JjXG4gICAgJGRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuZGVsZXRlKCk7XG4gICAgfSk7XG5cbiAgICAkZGl2LmFwcGVuZENoaWxkKCR0aXRsZSk7XG4gICAgJGRpdi5hcHBlbmRDaGlsZCgkZGVsZXRlKTtcblxuICAgICRmb2xkZXIuYXBwZW5kQ2hpbGQoJGRpdik7XG4gICAgJGRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGN1cnJlbnRGb2xkZXIgPSB0aGlzO1xuICAgICAgY3VycmVudEZvbGRlci5hY3RpdmUgPSBmYWxzZXRoaXMucmVuZGVyVGFza3MoKTtcbiAgICAgIGxldCBmb2xkZXJzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9sZGVyJyk7XG4gICAgICBmb2xkZXJzQ2xhc3MuZm9yRWFjaCgoZikgPT4gKGYuY2xhc3NMaXN0LnZhbHVlID0gJ2ZvbGRlcicpKTtcbiAgICAgIGxldCBkZWxCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZScpO1xuICAgICAgZGVsZXRlQnRucy5mb3JFYWNoKChidXR0b24pID0+IChidXR0b24uc3JjID0gJy4vaW1nL3N0b2NrLmpwZycpKTsgLy9UT0RPOiBhZGQgaW1nIHNyY1xuICAgICAgaWYgKCEkZGl2LmNsYXNzTGlzdC52YWx1ZS5pbmNsdWRlcygnYWN0aXZlJykpIHtcbiAgICAgICAgJGRpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgJGRlbGV0ZS5zcmMgPSAnLi9pbWcvc3RvY2suanBnJzsgLy9UT0RPOiBhZGQgaW1nIHNyY1xuICAgICAgfSBlbHNlIHJldHVybjtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZSgpIHtcbiAgICBmb2xkZXJzQXJyYXkgPSBmb2xkZXJzQXJyYXkuZmlsdGVyKChmb2xkZXIpID0+IGZvbGRlci5pZCAhPT0gdGhpcy5pZCk7XG4gICAgZm9sZGVyLnJlbmRlckZvbGRlcnMoKTtcbiAgfVxuXG4gIHJlbmRlclRhc2tzKCkge1xuICAgIGNvbnN0ICR0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrLWNvbnRhaW5lcicpO1xuICAgICR0YXNrcy5pbm5lckhUTUwgPSBgYDtcbiAgICB0aGlzLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHRhc2sucmVuZGVyKCkpO1xuICB9XG5cbiAgc3RhdGljIHJlbmRlckZvbGRlcnMoKSB7XG4gICAgJGZvbGRlci5pbm5lckhUTUwgPSAnJztcbiAgICBmb2xkZXJzQXJyYXkuZm9yRWFjaCgoZm9sZGVyKSA9PiBmb2xkZXIucmVuZGVyKCkpO1xuICB9XG5cbiAgc3RhdGljIHNldEN1cnJlbnRGb2xkZXIoZm9sZGVyKSB7XG4gICAgY3VycmVudEZvbGRlciA9IGZvbGRlcjtcbiAgfVxufVxuXG5sZXQgZm9sZGVyc0FycmF5ID0gW25ldyBGb2xkZXIoJ1Rlc3QgRm9sZGVyJyldO1xubGV0IGN1cnJlbnRGb2xkZXIgPSBmb2xkZXJzQXJyYXlbMF07XG5cbmV4cG9ydCB7IEZvbGRlciwgZm9sZGVyc0FycmF5LCBjdXJyZW50Rm9sZGVyIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBzZXRJZCB9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7IGN1cnJlbnRGb2xkZXIgfSBmcm9tICcuL2ZvbGRlcic7XG5cbmNvbnN0ICRmb2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay1jb250YWluZXInKTtcblxuZXhwb3J0IGNsYXNzIFRhc2sge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBkYXRlLCBwcmlvcml0eSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgdGhpcy5pZCA9IHNldElkKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgLy8gQ3JlYXRlIEhUTUwgZWxlbWVudHMgd2l0aCBmdW5jdGlvbiBmcm9tIGRvbSBtb3VkbGUsIGFzc2lnbiB0aGVtIHRvIGEgY29uc3RhbnQsIGFuZCBhc3NpZ24gcHJvcGVydGllcyB0byBlbGVtZW50c1xuICAgIGNvbnN0ICRkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB0aGlzLmlkLCBbJ3Rhc2snXSwgbnVsbCk7XG4gICAgY29uc3QgJGRpdlRhc2tOYW1lID0gY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCwgWyd0YXNrLW5hbWUnXSwgbnVsbCk7XG4gICAgY29uc3QgJGNoZWNrYm94ID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnLCBudWxsLCBbJ2NoZWNrYm94J10sIG51bGwpO1xuICAgICRjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcblxuICAgIGNvbnN0ICRwID0gY3JlYXRlRWxlbWVudCgncCcsIG51bGwsIG51bGwsIHRoaXMubmFtZSk7XG4gICAgY29uc3QgJGRpdlRhc2tJbmZvID0gY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCwgWyd0YXNrLWluZm8nXSwgbnVsbCk7XG4gICAgY29uc3QgJGRhdGUgPSBjcmVhdGVFbGVtZW50KCdwJywgbnVsbCwgbnVsbCwgdGhpcy5kYXRlKTtcbiAgICBjb25zdCAkYmFkZ2UgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsLCBbJ2JhZGdlJ10sIHRoaXMucHJpb3JpdHkpO1xuXG4gICAgY29uc3QgJGRlbGV0ZSA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycsIG51bGwsIFsnZWRpdCddLCBudWxsKTtcbiAgICAkZGVsZXRlLnNyYyA9ICcuL2ltZy9zdG9jay5qcGcnOyAvL1RPRE86IGFkZCBpbWcgc3JjXG4gICAgY29uc3QgJGVkaXQgPSBjcmVhdGVFbGVtZW50KCdpbWcnLCBudWxsLCBbJ2VkaXQnXSwgbnVsbCk7XG4gICAgJGVkaXQuc3JjID0gJy4vaW1nL3N0b2NrLmpwZyc7IC8vVE9ETzogYWRkIGltZyBzcmNcbiAgICAkZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuZWRpdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQXBwZW5kIGNyZWF0ZWQgZWxlbWVudHMgdG8gZWFjaCBvdGhlclxuICAgICRkaXZUYXNrTmFtZS5hcHBlbmRDaGlsZCgkY2hlY2tib3gpO1xuICAgICRkaXZUYXNrTmFtZS5hcHBlbmRDaGlsZCgkcCk7XG5cbiAgICAkZGl2VGFza0luZm8uYXBwZW5kQ2hpbGQoJGRhdGUpO1xuICAgICRkaXZUYXNrSW5mby5hcHBlbmRDaGlsZCgkYmFkZ2UpO1xuICAgICRkaXZUYXNrSW5mby5hcHBlbmRDaGlsZCgkZGVsZXRlKTtcbiAgICAkZGl2VGFza0luZm8uYXBwZW5kQ2hpbGQoJGVkaXQpO1xuXG4gICAgJGRpdi5hcHBlbmRDaGlsZCgkZGl2VGFza05hbWUpO1xuICAgICRkaXYuYXBwZW5kQ2hpbGQoJGRpdlRhc2tJbmZvKTtcblxuICAgICRmb2xkZXIuYXBwZW5kQ2hpbGQoJGRpdik7XG4gICAgJGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICRwLmNsYXNzTGlzdC50b2dnbGUoJ2RvbmUnKTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5wcmlvcml0eSA9PT0gJ2ltcG9ydGFudCcpIHtcbiAgICAgICRiYWRnZS5jbGFzc0xpc3QuYWRkKCdpbXBvcnRhbnQnKTtcbiAgICB9XG5cbiAgICAkZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5kZWxldGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZSgpIHtcbiAgICBjdXJyZW50Rm9sZGVyLnRhc2tzID0gY3VycmVudEZvbGRlci50YXNrcy5maWx0ZXIoXG4gICAgICAodGFzaykgPT4gdGFzay5pZCAhPT0gdGhpcy5pZFxuICAgICk7XG4gICAgY3VycmVudEZvbGRlci5yZW5kZXJUYXNrcygpO1xuICB9XG5cbiAgZWRpdCgpIHtcbiAgICBjb25zdCAkbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlNb2RhbCcpO1xuICAgICRtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGNvbnN0ICRmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tdGFzay1lZGl0Jyk7XG4gICAgJGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0aWx0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLW5hbWUtZWRpdCcpO1xuICAgICAgaWYgKCR0aXRsZS52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgYWxlcnQoJ1Rhc2sgbXVzdCBoYXZlIGEgbmFtZS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgJGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1kYXRlLWVkaXQnKTtcbiAgICAgIGlmICgkZGF0ZS52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgYWxlcnQoJ1BsZWFzZSBjaG9vc2UgYSBkZWFkbGluZS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgJHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stcHJpb3JpdHktZWRpdCcpO1xuXG4gICAgICAvLyBBc3NpZ24gdXNlciBpbnB1dCB0byBjb25zdHJ1Y3RvclxuICAgICAgdGhpcy5uYW1lID0gJHRpdGxlLnZhbHVlO1xuICAgICAgdGhpcy5kYXRlID0gJGRhdGUudmFsdWU7XG4gICAgICB0aGlzLnByaW9yaXR5ID0gJHByaW9yaXR5LnZhbHVlO1xuICAgICAgJG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBjdXJyZW50Rm9sZGVyLnJlbmRlclRhc2tzKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZvbGRlciwgZm9sZGVyc0FycmF5LCBjdXJyZW50Rm9sZGVyIH0gZnJvbSAnLi9tb2R1bGVzL2ZvbGRlcic7XG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAnLi9tb2R1bGVzL3Rhc2snO1xuXG5jb25zdCAkZm9sZGVyRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWZvbGRlcicpO1xuXG4kZm9sZGVyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0ICR0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXItbmFtZScpO1xuICBpZiAoJHRpdGxlLnZhbHVlID09PSAnJykge1xuICAgIGFsZXJ0KCdQcm9qZWN0IGZvbGRlciBtdXN0IGhhdmUgYSBuYW1lJyk7XG5cbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZm9sZGVyID0gbmV3IEZvbGRlcigkdGl0bGUudmFsdWUpO1xuICBmb2xkZXJzQXJyYXkucHVzaChmb2xkZXIpO1xuICAkdGl0bGUudmFsdWUgPSAnJztcbiAgRm9sZGVyLnJlbmRlckZvbGRlcnMoKTtcbiAgRm9sZGVyLnNldEN1cnJlbnRGb2xkZXIoZm9sZGVyKTtcbiAgbGV0IGZvbGRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9sZGVyJyk7XG4gIGZvbGRlcnNbZm9sZGVycy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgZm9sZGVyc1tmb2xkZXJzLmxlbmd0aCAtIDFdLmxhc3RDaGlsZC5zcmMgPSAnLi9pbWcvc3RvY2suanBnJzsgLy9UT0RPOiBhZGQgaW1nIHNyY1xufSk7XG5cbmNvbnN0ICR0YXNrRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXRhc2snKTtcblxuJHRhc2tGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgJHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stbmFtZScpO1xuICBpZiAoJHRpdGxlLnZhbHVlID09PSAnJykge1xuICAgIGFsZXJ0KCdUYXNrIG11c3QgaGF2ZSBhIG5hbWUnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgJGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1kYXRlJyk7XG4gIGlmICgkZGF0ZS52YWx1ZSA9PT0gJycpIHtcbiAgICBhbGVydCgnUGxlYXNlIGNob29zZSBhIGRlYWRsaW5lLicpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCAkcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1wcmlvcml0eScpO1xuXG4gIGNvbnN0IHRhc2sgPSBuZXcgVGFzaygkdGl0bGUudmFsdWUsICRkYXRlLnZhbHVlLCAkcHJpb3JpdHkudmFsdWUpO1xuICBjdXJyZW50Rm9sZGVyLnRhc2tzLnB1c2godGFzayk7XG4gIHRhc2sucmVuZGVyKCk7XG59KTtcblxuRm9sZGVyLnJlbmRlckZvbGRlcnMoKTtcbmNvbnN0IHVzZXIgPSBwcm9tcHQoYFdoYXQncyB5b3VyIGZpcnN0IG5hbWU/YCk7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlci1uYW1lJykuaW5uZXJUZXh0ID0gdXNlciB8fCAnVXNlcic7XG4iXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJpZCIsImNsYXNzZXMiLCJjb250ZW50IiwiZWxlbWVudCIsImRvY3VtZW50IiwiZm9yRWFjaCIsIm15Q2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lclRleHQiLCJzZXRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNwbGl0Iiwiam9pbiIsIiRmb2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwiRm9sZGVyIiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRoaXMiLCJ0YXNrcyIsInJlbmRlciIsIiRkaXYiLCIkdGl0bGUiLCIkZGVsZXRlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZSIsImFwcGVuZENoaWxkIiwiY3VycmVudEZvbGRlciIsImFjdGl2ZSIsImZhbHNldGhpcyIsInJlbmRlclRhc2tzIiwicXVlcnlTZWxlY3RvckFsbCIsImYiLCJ2YWx1ZSIsImRlbGV0ZUJ0bnMiLCJidXR0b24iLCJpbmNsdWRlcyIsImZvbGRlcnNBcnJheSIsImZpbHRlciIsImZvbGRlciIsInJlbmRlckZvbGRlcnMiLCJpbm5lckhUTUwiLCJ0YXNrIiwic3RhdGljIiwiVGFzayIsIm5hbWUiLCJkYXRlIiwicHJpb3JpdHkiLCIkZGl2VGFza05hbWUiLCIkY2hlY2tib3giLCIkcCIsIiRkaXZUYXNrSW5mbyIsIiRkYXRlIiwiJGJhZGdlIiwiJGVkaXQiLCJlZGl0IiwidG9nZ2xlIiwiJG1vZGFsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJlIiwicHJldmVudERlZmF1bHQiLCJhbGVydCIsIiRwcmlvcml0eSIsInB1c2giLCJzZXRDdXJyZW50Rm9sZGVyIiwiZm9sZGVycyIsImxlbmd0aCIsImxhc3RDaGlsZCIsInVzZXIiLCJwcm9tcHQiXSwic291cmNlUm9vdCI6IiJ9